================================================================================
          DUKIRA WEBHOOK API - COMPLETE TESTING GUIDE
================================================================================

YOUR COMPLETE WORKFLOW IS READY!

WHAT'S CONFIGURED:
  âœ… API Server          â†’ http://localhost:8000
  âœ… Database            â†’ PostgreSQL (Docker)
  âœ… Cache               â†’ Redis (Docker)
  âœ… AI Model            â†’ TestModel (50% pass rate)
  âœ… Cloud Storage       â†’ Google Cloud (bucket: dukira-web-hook)
  âœ… Shopify OAuth       â†’ Configured and ready

================================================================================
                         THE COMPLETE FLOW
================================================================================

  Shopify     â†’    API      â†’   Download   â†’   AI Model   â†’   Decision
  Webhook          Server        Images         TestModel
                                                              â”Œâ†’ Reject (< 0.7)
                                                              â”‚
                                                              â””â†’ Upload to GCS (â‰¥ 0.7)

================================================================================
                    ðŸš€ START TESTING (4 STEPS)
================================================================================

STEP 1: Start the API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
./local_test.sh

What it does:
â€¢ Starts PostgreSQL & Redis (Docker containers)
â€¢ Activates Python virtual environment
â€¢ Starts FastAPI server on port 8000
â€¢ Starts Celery workers for background jobs

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 2: Check Everything Works
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
./check_status.sh

You should see:
âœ“ PostgreSQL (5432): LISTENING
âœ“ Redis (6379): LISTENING
âœ“ API Server (8000): LISTENING
âœ“ API Health: OK

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 3: Connect Shopify & Sync Products
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Option A: Interactive Menu
  ./quick_test.sh
  â†’ Select option 3: Start Shopify OAuth
  â†’ Select option 4: Trigger Product Sync

Option B: Manual Commands
  curl "http://localhost:8000/auth/shopify/authorize?shop=YOUR-STORE.myshopify.com"
  # Open the auth_url in browser, complete OAuth
  curl -X POST "http://localhost:8000/products/sync/1"

Option C: Browser
  Open: http://localhost:8000/docs
  Try the endpoints interactively

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

STEP 4: Watch the Magic! ðŸŽ‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
tail -f local_test.log

You'll see:
[INFO] Downloading image from Shopify CDN...
[INFO] TestModel analyzed image: score=0.85, quality=high
[SUCCESS] Image uploaded: products/123/images/456.jpg

================================================================================
                      ðŸ“Š VERIFY RESULTS
================================================================================

Check Products & Images:
  curl "http://localhost:8000/products/store/1"
  curl "http://localhost:8000/products/1/images"

Get Statistics:
  curl "http://localhost:8000/products/stats"

Example output:
  {
    "approved": 15,   â† Uploaded to GCS
    "rejected": 8,    â† Did not pass AI filter
    "stored": 15      â† Successfully in Google Cloud
  }

View in Google Cloud:
  https://console.cloud.google.com/storage/browser/dukira-web-hook

================================================================================
                      ðŸ› ï¸  HELPER SCRIPTS
================================================================================

  local_test.sh              â†’ Start all services
  local_test.sh stop         â†’ Stop all services
  check_status.sh            â†’ Check service status
  test_shopify_webhook.sh    â†’ View E2E test guide
  quick_test.sh              â†’ Interactive testing menu

================================================================================
                      ðŸ“š DOCUMENTATION
================================================================================

  README_COMPLETE_SETUP.md     â†’ This guide (complete overview)
  SHOPIFY_WEBHOOK_GUIDE.md     â†’ Detailed workflow explanation
  QUICK_START.md               â†’ Basic usage guide
  README.md                    â†’ Original project documentation

================================================================================
                      ðŸŽ¯ TESTING CHECKLIST
================================================================================

  â–¡  Start services: ./local_test.sh
  â–¡  Check status: ./check_status.sh (all green?)
  â–¡  View API docs: http://localhost:8000/docs
  â–¡  Connect Shopify: OAuth flow completes
  â–¡  Sync products: Products appear in database
  â–¡  Process images: Images downloaded and analyzed
  â–¡  AI scoring: Some approved (â‰¥0.7), some rejected (<0.7)
  â–¡  GCS upload: Approved images in bucket
  â–¡  Webhook test: Update product in Shopify â†’ webhook received

================================================================================
                      ðŸ” HOW AI MODEL WORKS
================================================================================

Current: TestModel (for development)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Random 50% pass rate
â€¢ Score range: 0.0 - 1.0
â€¢ Pass threshold: â‰¥ 0.7
â€¢ Mock analysis: quality, clarity, lighting, composition

To use Real AI Model:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Edit .env:
  USE_TEST_MODEL=false
  AI_MODEL_API_URL=https://your-ai-api.com/analyze
  AI_MODEL_API_KEY=your-api-key

================================================================================
                      ðŸŽ‰ YOU'RE READY TO TEST!
================================================================================

Quick start now:

  ./local_test.sh
  ./quick_test.sh

Or follow the 4-step guide above â†‘

Everything is configured and ready to:
âœ… Receive Shopify webhooks
âœ… Download product images
âœ… Run AI quality check (TestModel)
âœ… Upload approved images to Google Cloud

================================================================================
